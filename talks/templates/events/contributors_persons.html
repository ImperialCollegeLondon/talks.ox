{% extends "base.html" %}

{% load faceted_navigation %}

{% block title %}Person Administration{% endblock %}

{% block content %}

    <style type="text/css">
        .filter-selected {
            border-color: #b1cbe3;
            border-style: solid;
            border-width: 1px;
            border-radius: 5px;
        }

        span.filter-active {
            display: none;
        }

        .filter-selected>span {
            display: inline;
            float: right;
        }
    </style>

    <h2>People administration</h2>

    <div class="container">
        <div class="row">
            <div class="col-xs-3">

            <ul class="nav nav-list well">
                <li><a href="{% url 'contributors-events' %}?date=future" class="">Talks  <span class="glyphicon glyphicon-ok filter-active"></span></a></li>
                <li><a href="{% url 'contributors-eventgroups' %}" class="">Series  <span class="glyphicon glyphicon-ok filter-active"></span></a></li>
                <li><a href="{% url 'contributors-persons' %}" class="filter-selected">People  <span class="glyphicon glyphicon-ok filter-active"></span></a></li>
            </ul>
        </div>



    <div class="col-xs-7">
    <a class="btn btn-primary navbar-btn" href="{% url 'create-person' %}"><span class="glyphicon glyphicon-plus"></span> New Person</a>
    <table class="table table-bordered table-striped">
        <thead>
            <td>Name</td>
            <td>Bio/affiliation</td>
            <td>Email</td>
            <td>Edit</td>
        </thead>
            {% for person in persons %}
            <tr>
                <td>
                    <a href="{% url 'show-person' person.slug %}">{{ person.name }}</a>
                </td>
                <td>
                    {{ person.bio }}
                </td>
                <td>
                    {{ person.email_address }}
                </td>
                <td>
                    {% if perms.events.change_person %}
                        <a class="btn btn-primary" href="{% url 'edit-person' person.slug %}">Edit</a>
                    {% else %}
                        Not authorised
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
    </table>


    {% with persons as page %}
        {% include 'events/_pagination.html' %}
    {% endwith %}

    </div>
    </div>
    </div>

{% endblock %}
